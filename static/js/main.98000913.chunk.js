(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{103:function(e,t,a){e.exports=a(254)},108:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(13),c=a.n(s),r=(a(108),a(5)),l=a(6),i=a(8),u=a(7),m=a(2),d=a.n(m),h=a(16),p=a(3),f=a(26),g=a(57),w="https://chris-ben-group-project.herokuapp.com",v=function(e){var t=e.text;return o.a.createElement("div",{className:"myMarker"},t)},E=function(e){var t=e.id;return o.a.createElement(h.b,{to:"/post/".concat(t)},o.a.createElement("div",{className:"evMarker"}))},b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={data:[],center:{lat:0,lng:0},zoom:13,events_near_me:[]},e.showHidePostForm=function(t){e.setState({createNewPost:t})},e.refreshFeed=function(t){d.a.get("".concat(w).concat(t)).then((function(t){e.setState({data:t.data}),console.log(t.data)})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.refreshFeed("/index_near_me"),d.a.get("".concat(w,"/get_current_user")).then((function(t){e.setState({current_user:t.data});var a=e.state.center;a.lat=t.data.latitude,a.lng=t.data.longitude,e.setState({center:a})})).catch((function(e){return console.warn(e)})),d.a.get("".concat(w,"/index_near_me")).then((function(t){e.setState({events_near_me:t.data}),console.log(t)})).catch((function(e){return console.warn(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"main-page-css"},o.a.createElement("div",{className:"pimg1"},o.a.createElement("div",{className:"ptext"},o.a.createElement("p",{className:"border-welcome"},"Welcome"),o.a.createElement("p",{className:"welcome-message"},"A SEI 37 Project by Christopher Stevenson and Benjamin Luck"))),o.a.createElement("section",{className:"section section-light"},o.a.createElement("h2",{className:"section section-light"},"Our Website"),o.a.createElement("p",{className:"section section-light"},"This is a website built to let you see what's going on around near you. A platform to see cool events that are happening near you and give you the opportunity to follow the poster and keep up to date with their events and happenings.")),o.a.createElement("div",{className:"pimg2"},o.a.createElement("h5",{className:"events"},"Events near you"),this.state.center.lat&&o.a.createElement("div",{className:"bigmap"},o.a.createElement(g.a,{bootstrapURLKeys:{key:"AIzaSyDWqy6cjGoLQ-NtYFw0qOn3nnYM2lg8cEM"},defaultCenter:this.state.center,defaultZoom:this.state.zoom},o.a.createElement(v,{lat:this.state.center.lat,lng:this.state.center.lng,text:"You"}),this.state.events_near_me.map((function(e){return o.a.createElement(E,{lat:e.latitude,lng:e.longitude,id:e.id})}))))),o.a.createElement("section",{className:"section section-dark"},o.a.createElement("h2",{className:"section section-dark"},"Sort your feed"),o.a.createElement("button",{type:"button",className:"search",onClick:function(){return e.refreshFeed("/index_all")}},"All Posts"),o.a.createElement("button",{type:"button",className:"search",onClick:function(){return e.refreshFeed("/index_follows")}},"My Follows"),o.a.createElement("button",{type:"button",className:"search",onClick:function(){return e.refreshFeed("/index_near_me")}},"Near me")),o.a.createElement("div",{className:"pimg3"},o.a.createElement("div",{className:"cards-css"},o.a.createElement("div",{className:"card-container"},this.state.data.reverse().map((function(e){return o.a.createElement("div",{className:"card"},o.a.createElement(h.b,{to:"/post/".concat(e.id)},o.a.createElement(f.Image,{className:"card-image",cloudName:"dvmqosqwr",publicId:e.image,width:"500",crop:"scale"})),o.a.createElement("span",{className:"title"},e.title),o.a.createElement("span",{className:"likes"},"Likes: ",e.liked_by.length))}))))))}}]),a}(o.a.Component),k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:""},e.handleSubmit=function(t){e.props.onLoginSubmit(e.state.email,e.state.password),t.preventDefault()},e.handleInput=function(t){switch(t.target.name){case"email":e.setState({email:t.target.value});break;case"password":e.setState({password:t.target.value})}},e}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("form",{id:"login",className:"input-group",onSubmit:this.handleSubmit},o.a.createElement("input",{onChange:this.handleInput,name:"email",id:"email",type:"email",className:"input-field",placeholder:"Enter Email"}),o.a.createElement("input",{onChange:this.handleInput,name:"password",id:"password",type:"password",className:"input-field",placeholder:"Enter Password"}),o.a.createElement("button",{className:"submit-btn"},"Login"))}}]),a}(o.a.Component),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={name:"",email:"",password:""},e.handleSubmit=function(t){e.props.onSignupSubmit(e.state.name,e.state.email,e.state.password),t.preventDefault()},e.handleInput=function(t){switch(t.target.name){case"name":e.setState({name:t.target.value});break;case"email":e.setState({email:t.target.value});break;case"password":e.setState({password:t.target.value})}},e}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("form",{id:"register",className:"input-group",onSubmit:this.handleSubmit},o.a.createElement("input",{onChange:this.handleInput,name:"name",id:"name",type:"text",className:"input-field",placeholder:"Enter Name"}),o.a.createElement("input",{onChange:this.handleInput,name:"email",id:"email",type:"email",className:"input-field",placeholder:"Enter Email"}),o.a.createElement("input",{onChange:this.handleInput,name:"password",id:"password",type:"password",className:"input-field",placeholder:"Enter Password"}),o.a.createElement("button",{className:"submit-btn"},"Sign Up"))}}]),a}(o.a.Component),_="https://chris-ben-group-project.herokuapp.com",y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={x:null,y:null,z:null},e.getLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e.usePosition):console.warn("Geolocation not supported by this browser.")},e.usePosition=function(e){d.a.post("".concat(_,"/update_my_location"),{latitude:e.coords.latitude,longitude:e.coords.longitude}).then().catch((function(e){return console.warn(e)}))},e.handleLogin=function(t,a){var n={email:t,password:a};d.a.post("".concat(_,"/api/user_token"),{auth:n}).then((function(t){localStorage.setItem("jwt",t.data.jwt),d.a.defaults.headers.common.Authorization="Bearer "+t.data.jwt,d.a.get("".concat(_,"/get_current_user")).then((function(t){e.props.handleLogin(t.data),e.getLocation(),setInterval(e.getLocation,6e4),e.props.history.push("/")})).catch((function(e){return console.warn(e)}))})).catch((function(e){console.warn(e)}))},e.handleSignup=function(t,a,n){d.a.post("".concat(_,"/api/users"),{name:t,email:a,password:n}).then((function(t){e.handleLogin(a,n)})).catch((function(e){return console.warn(e)}))},e.toggleLoginRegister=function(t){var a=e.state.x,n=e.state.y,o=e.state.z;"l"===t?(a.style.left="50px",n.style.left="450px",o.style.left="0"):"r"===t&&(a.style.left="-400px",n.style.left="50px",o.style.left="110px")},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({x:document.getElementById("login"),y:document.getElementById("register"),z:document.getElementById("btn")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login-page-css"},o.a.createElement("div",{className:"hero"},o.a.createElement("div",{className:"form-box"},o.a.createElement("h2",{className:"title"},"Our Website Name"),o.a.createElement("div",{className:"button-box"},o.a.createElement("div",{id:"btn"}),o.a.createElement("button",{className:"toggle-btn",onClick:function(){return e.toggleLoginRegister("l")}},"Log In"),o.a.createElement("button",{className:"toggle-btn",onClick:function(){return e.toggleLoginRegister("r")}},"Register")),o.a.createElement(k,{onLoginSubmit:this.handleLogin}),o.a.createElement(N,{onSignupSubmit:this.handleSignup}))))}}]),a}(o.a.Component),S=(a(247),"https://chris-ben-group-project.herokuapp.com"),O=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={data:{liked_by:[],disliked_by:[],comments:[]},current_user:{following_ids:[]},postOwner:{name:"",id:0},redirect:null,followButtonValue:null,center:{lat:0,lng:0},zoom:13,distance_from_me:null,comment:""},e.setPostOwner=function(t){d.a.get("".concat(S,"/get_owner_of_post/").concat(t)).then((function(t){var a=e.state.postOwner;a.name=t.data.name,a.id=t.data.id,e.setState({postOwner:a})})).catch((function(e){return console.warn(e)}))},e.handleLike=function(t){var a=e.state.data,n=a.liked_by,o=a.disliked_by;n.concat(o).forEach((function(t){t.id===e.state.current_user.id&&d.a.post("".concat(S,"/remove_like_from_post"),{post_id:e.state.data.id}).then().catch((function(e){return console.warn(e)}))})),"unlike"!=t.target.value&&d.a.post("".concat(S,"/create_like_for_this_post"),{post_id:e.state.data.id,status:t.target.value}).then().catch((function(e){return console.warn(e)})),n=n.filter((function(t){return t.id!=e.state.current_user.id})),o=o.filter((function(t){return t.id!=e.state.current_user.id})),"like"===t.target.value?n.push(e.state.current_user):"dislike"===t.target.value&&o.push(e.state.current_user),a.liked_by=n,a.disliked_by=o,e.setState({data:a})},e.deletePost=function(){d.a.delete("".concat(S,"/posts/").concat(e.props.match.params.id)).then((function(t){e.setState({redirect:"/"})})).catch((function(e){return console.warn(e)}))},e.handleFollow=function(t){d.a.post("".concat(S,"/follow_this_user"),{followed_id:e.state.postOwner.id,method:t}).then((function(t){"Follow"===e.state.followButtonValue?e.setState({followButtonValue:"Unfollow"}):"Unfollow"===e.state.followButtonValue&&e.setState({followButtonValue:"Follow"})})).catch((function(e){return console.warn(e)}))},e.handleCommentInput=function(t){e.setState({comment:t.target.value})},e.addCommentToPost=function(){d.a.post("".concat(S,"/posts/").concat(e.state.data.id,"/add_comment_to_post"),{comment:e.state.comment}).then((function(t){e.setState({data:t.data,comment:""})})).catch((function(e){return console.warn(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("".concat(S,"/posts/").concat(this.props.match.params.id,".json")).then((function(t){e.setState({data:t.data});var a=e.state.center;a.lat=e.state.data.latitude,a.lng=e.state.data.longitude,e.setState({center:a}),d.a.get("".concat(S,"/distance_from_me/").concat(e.state.data.id)).then((function(t){e.setState({distance_from_me:t.data.toFixed(2)})})).catch((function(e){return console.warn(e)})),d.a.get("".concat(S,"/get_owner_of_post/").concat(e.state.data.id)).then((function(t){var a=e.state.postOwner;a.name=t.data.name,a.id=t.data.id,e.setState({postOwner:a}),d.a.get("".concat(S,"/get_current_user")).then((function(t){e.setState({current_user:t.data}),e.state.current_user.id!=e.state.postOwner.id&&(e.state.current_user.following_ids.includes(e.state.postOwner.id)?e.setState({followButtonValue:"Unfollow"}):e.setState({followButtonValue:"Follow"}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.warn(e)}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;if(this.state.redirect)return o.a.createElement(p.a,{to:this.state.redirect});var t=this.state.data;return o.a.createElement("div",{className:"post-container-css"},o.a.createElement("div",{className:"post"},o.a.createElement("span",{className:"name"},this.state.postOwner.name),o.a.createElement(f.Image,{className:"image",cloudName:"dvmqosqwr",publicId:t.image,width:"700",crop:"scale"}),o.a.createElement("span",{className:"title"},t.title),o.a.createElement("span",{className:"descript"},t.description),o.a.createElement("span",{className:"location"},"Distance from me: ",this.state.distance_from_me,"km."),o.a.createElement("a",{className:"directions",target:"_blank",href:"".concat("https://www.google.com/maps/dir/?api=1&destination=").concat(t.latitude,",").concat(t.longitude)},"Get Directions"),o.a.createElement("span",{className:"likes"},"Likes: ",t.liked_by.length),o.a.createElement("span",{className:"dislikes"},"DisLikes: ",t.disliked_by.length),t.user_id===this.state.current_user.id&&o.a.createElement("span",{className:"delete",onClick:this.deletePost},"Delete Post"),o.a.createElement("div",{className:"comments-container"},this.state.data.comments.reverse().map((function(e){return o.a.createElement("p",{className:"comments"},e.comment)}))),o.a.createElement("input",{id:"comment-input",onChange:this.handleCommentInput,type:"text",className:"make-comment",placeholder:"Add a comment..."}),o.a.createElement("button",{type:"submit",onClick:this.addCommentToPost,className:"comment"},"Comment"),this.state.followButtonValue&&o.a.createElement("button",{className:"follow",onClick:function(){return e.handleFollow(e.state.followButtonValue)}},this.state.followButtonValue," ",this.state.postOwner.name),o.a.createElement("div",{className:"buttonBox"},t.liked_by.some((function(t){return t.id===e.state.current_user.id}))?o.a.createElement("button",{onClick:this.handleLike,value:"unlike"},"Remove Like"):o.a.createElement("button",{onClick:this.handleLike,value:"like"},"Like"),t.disliked_by.some((function(t){return t.id===e.state.current_user.id}))?o.a.createElement("button",{onClick:this.handleLike,value:"unlike"},"Remove Dislike"):o.a.createElement("button",{onClick:this.handleLike,value:"dislike"},"Dislike"))))}}]),a}(o.a.Component),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={newPost:{title:"",description:"",image:""}},e.handleSubmit=function(t){e.props.showHidePostForm(!1),d.a.post("http://localhost:3000/posts",{title:e.state.newPost.title,description:e.state.newPost.description,image:e.state.newPost.image}).then().catch((function(e){return console.warn(e)})),t.preventDefault()},e.handleInput=function(t){var a=e.state.newPost;switch(t.target.name){case"title":a.title=t.target.value;break;case"description":a.description=t.target.value}e.setState({newPost:a})},e.checkUploadResult=function(t){if("success"===t.event){var a=e.state.newPost;a.image=t.info.public_id,e.setState({newPost:a})}},e.showWidget=function(t){e.state.widget.open()},e.closePost=function(){e.props.showHidePostForm(!1)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({widget:window.cloudinary.createUploadWidget({cloudName:"dvmqosqwr",uploadPreset:"k1jbpdku"},(function(t,a){e.checkUploadResult(a)}))})}},{key:"render",value:function(){return o.a.createElement("div",{className:"newpost-css"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("h3",null,"New Post"),o.a.createElement("label",{htmlFor:"title"},"Title"),o.a.createElement("input",{onChange:this.handleInput,name:"title",id:"title",type:"text"}),o.a.createElement("label",{htmlFor:"description"},"Description"),o.a.createElement("textarea",{onChange:this.handleInput,name:"description",id:"description",type:"textarea"}),o.a.createElement("div",{className:"uploadImage",onClick:this.showWidget},"Upload Photo"),o.a.createElement(f.Image,{className:"previewImg",cloudName:"dvmqosqwr",publicId:this.state.newPost.image,width:"200",crop:"scale"}),o.a.createElement("button",null,"Share"),o.a.createElement("p",{className:"closeButton",onClick:this.closePost},"X")))}}]),a}(o.a.Component),C=(a(248),a(249),a(250),a(251),a(252),a(253),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={currentUser:void 0,createNewPost:!1},e.handleLogin=function(t){e.setState({currentUser:t})},e.handleLogout=function(){e.setState({currentUserName:void 0}),d.a.defaults.headers.common.Authorization=void 0},e.buttonClick=function(){console.log("This.props is"),console.log(e.props)},e.showHidePostForm=function(t){e.setState({createNewPost:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){var e=this;return o.a.createElement(h.a,null,void 0!==this.state.currentUser&&o.a.createElement("div",{className:"header-footer-css"},o.a.createElement("header",null,o.a.createElement("a",{className:"title"},"Our Website Name"),o.a.createElement("nav",null,o.a.createElement("ul",{className:"nav_links"},o.a.createElement("li",null,o.a.createElement(h.b,{to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/"},"My Profile")),o.a.createElement("li",null,o.a.createElement(h.b,{onClick:this.handleLogout,to:"/login"},"Logout")))),o.a.createElement("button",{onClick:function(){return e.showHidePostForm(!0)}},"New Post"))),this.state.createNewPost&&o.a.createElement(j,{showHidePostForm:this.showHidePostForm,refreshFeed:this.refreshFeed}),o.a.createElement(p.b,{exact:!0,path:"/login",render:function(t){return o.a.createElement(y,Object.assign({handleLogin:e.handleLogin},t))}}),o.a.createElement(p.b,{exact:!0,path:"/",component:b}),o.a.createElement(p.b,{exact:!0,path:"/post/:id",component:O}),void 0!==this.state.currentUser&&o.a.createElement("div",{className:"header-footer-css"},o.a.createElement("footer",null,o.a.createElement("a",{className:"title2",href:"#"},"Developed by Stevo and Gingee"),o.a.createElement("nav",{className:"fill"},o.a.createElement("ul",{className:"nav_links"},o.a.createElement("div",{className:"icons"},o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/Chris-Stevenson-Git/Group-Proj-React-Frontend"},o.a.createElement("i",{className:"fa fa-github"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"https://twitter.com/50cent/status/22366597012"},o.a.createElement("i",{className:"fa fa-twitter"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"https://www.instagram.com/p/3h2BrqmDbo/?utm_source=ig_embed"},o.a.createElement("i",{className:"fa fa-instagram"})))))))))}}]),a}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.98000913.chunk.js.map